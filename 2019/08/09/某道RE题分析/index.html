<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  
  <meta name="keywords" content="敬畏之心">
  <meta name="description" content="学习代码之路">
  
  <title>太空独角兽</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/materialize.min.css">
    
      <link rel="stylesheet" href="/css/main.min.css">
    
  
  <style type="text/css">
      html{
          font-family: sans-serif;
          font-weight: 300;
      }
      @font-face {
          font-family: 'Material Icons';
          font-style: normal;
          font-weight: 400;
          src: url(/fonts/MaterialIcons-Regular.eot);
          src: url(/fonts/MaterialIcons-Regular.woff2) format('woff2'),
          url(/fonts/MaterialIcons-Regular.woff) format('woff'),
          url(/fonts/MaterialIcons-Regular.ttf) format('truetype')
      }
  </style>
<link rel="shortcut icon" href="/source/favicon.jpg">
<link rel="stylesheet" href="/css/prism-duotone-sea.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head>
<body>
<div id="menu-box"><a href="javascript:void(0)" id="menu" data-activates="slide-out" class="button-collapse menu" ><span class="nav-btn"></span></a></div>
<div id="menu-outer">
  <div id="menu-inner">
      <ul id="slide-out" class="side-nav" >
    <div class="nav-header"  style="background-image: url(/images/header-bg.png);background-color:#272727">
    <div class="header-box"><img src="/images/明石.jpg" ondragstart="return false;"></div>
    <p>太空独角兽</p>
    <div class="nav-link">
        
        <a href="http://example.com" target="_blank"> <div class="link-box twitter"></div></a>
        
        
        <a href="https://github.com/mskzj" target="_blank"><div class="link-box github"></div></a>
        
        
        <a href="mailto:mskzj123456@163.com"><div class="link-box email"></div></a>
        
        
        <a href="http://example.com" target="_blank"><div class="link-box weibo"></div></a>
        
        
        <a href="http://example.com" target="_blank"> <div class="link-box zhihu"></div></a>
        
    </div>
    <div class="nav-search">
        <form id="search-form"> <!-- 搜索框相关 -->
            <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索..." class="search form-control" autocomplete="off" autocorrect="off"/>
            <div class="nav-search-img"><i class="material-icons">search</i></div>
        </form>
        <div id="local-search-result"></div> <!-- 搜索结果区 -->
        <p class='no-result'>无搜索结果</p>
    </div>
</div>
    <!--Homepage-->

<li class="nav-list">
    <a href="/" target="_self">
        <div class="nav-ico"><i class="material-icons">home</i> </div><p>主页</p>
    </a>
</li>

<!--archives-->

<li class="nav-list dropdown-btn">
    <a  class=""  target="_self">
        <div class="nav-ico"><i class="material-icons">assignment</i></div><p>归档</p><div class="dropdown-ico"><i class="material-icons">arrow_drop_down</i></div>
    </a>
</li>

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="archive-link" href="/archives/2019/08/">August 2019<span class="archive-count">2</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2019/07/">July 2019<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2019/01/">January 2019<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/11/">November 2018<span class="archive-count">5</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/09/">September 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/05/">May 2018<span class="archive-count">2</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/04/">April 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/03/">March 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/02/">February 2018<span class="archive-count">1</span></a>
    </li>
</ul>
<!--categories-->

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="category-link" href="/categories/ctf/">ctf<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/web学习/">web学习<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/web安全/">web安全<span class="category-count">7</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/生活/">生活<span class="category-count">3</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/编程/">编程<span class="category-count">2</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/逆向/">逆向<span class="category-count">1</span></a>
    </li>
</ul>
<!--tags-->

<li class="nav-list">
    <a href="/archives" target="_self">
        <div class="nav-ico"><i class="material-icons">bookmark</i> </div><p>标签</p>
    </a>
</li>

<!--photo-->

<!--friends-->

<li class="nav-list">
    <a href="/friends" target="_self">
        <div class="nav-ico"><i class="material-icons">face</i> </div><p>友链</p>
    </a>
</li>

<!--about-->

<li class="nav-list">
    <a href="/about" target="_self">
        <div class="nav-ico"><i class="material-icons">copyright</i> </div><p>关于</p>
    </a>
</li>


</ul>

  </div>
</div>

<div id="content-outer">
  <div id="content-inner">
    
<article id="post">
  <div class="post-page-title"  style="background-color:#272727;background-image:url(/images/random/vateral-1.png)" >
  <h2>某道RE题分析</h2>
    
  <p>作者:太空独角兽 &nbsp&nbsp 发布于:<time datetime="2019-08-09T07:27:31.000Z">
          2019-08-09
    </time>
  </p>
    
  </div>
  <div class="post-page-content">
  <blockquote>
<p>找学姐要的的一道RE题，折磨了笔者两天（笔者菜鸡一枚）。最后写程序debug快吐了。可见<strong>编程能力能走多远RE就能走多远</strong></p>
</blockquote>
<h2 id="分析文件"><a href="#分析文件" class="headerlink" title="#分析文件"></a>#分析文件</h2><p>查看文件格式</p>
<pre><code>$ file barely_reversible
barely_reversible: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, stripped
</code></pre><p>是一个64位的ELF文件，拖入64位IDA进行分析</p>
<p>根据文字交叉索引找到关键函数位置，一键生成代码。根据分析可知道关键的函数为<code>sub_1046</code>和<code>sub_D16</code></p>
<pre><code> sub_11A1(&quot;Input flag:&quot;, a2, &amp;v7);             // 输入
 sub_1046(&amp;v7, 64, (__int64)&amp;unk_203020);
 if ( sub_D16((__int64)&amp;v7, 64LL) )            // 验证
  {
    v3 = &quot;Correct&quot;;
    sub_11A1(&quot;Correct&quot;, 64LL, v2);
  }
</code></pre><p>本以为<code>sub_1046</code>会对输入的数据进行处理，然而通过动态跟进发现里面一大堆东西都没有用对校验没有影响，校验函数<code>sub_D16</code>依旧取得原始输入。<br>当然动态跟进需要花费耐心和时间。（觉得出题人就是想给人心里压力：P</p>
<p>那么分析得重点就是校验函数了</p>
<h2 id="深入校验函数"><a href="#深入校验函数" class="headerlink" title="#深入校验函数"></a>#深入校验函数</h2><pre><code>bool __fastcall sub_D16(__int64 flag, __int64 len)
{
  signed int i; // [rsp+1Ch] [rbp-4h]

  for ( i = 0; i &lt;= 63; ++i )                   // 输入非负
  {
    if ( *(_BYTE *)(i + flag) &lt; 0 )
      return 0;                                 // unk_1DA0是最终比对数据
                                                // 
  }
  sub_A83(flag, len);
  return (unsigned int)check(flag, (__int64)&amp;unk_1DA0, 64LL) == 0;
</code></pre><p>显而易见根据原始输入计算校验数的函数是<code>sub_A83</code>，一进来看到大量的循环。</p>
<p>将大循环<code>for ( i = 0; i &lt;= 7; ++i )</code>中的内容其拆分5为部分,其中mark的初始值为<code>0x4E65534532303138</code>,·<code>f_add</code>指向<code>`flag</code></p>
<p>1.</p>
<pre><code>for ( j = 0; j &lt;= 7; ++j )                  // 8
  v16[j] = sub_859(8 * j + f_add);
</code></pre><p>sub_859对每8个数进行移位拼接成64位有符号数</p>
<p>2.</p>
<pre><code>for ( k = 0; k &lt;= 7; ++k )                  // 8
      v16[k] = sub_A01(v16[k], mark++);
</code></pre><p>sub_A01对64位有符号数进行处理</p>
<p>3.</p>
<pre><code>for ( l = 0; l &lt;= 9; ++l )
    {
      for ( m = 0; m &lt;= 3; ++m )
      {
        v2 = v16[2 * m + 1];
        v3 = sub_A01(v16[2 * m], mark);
        v16[2 * m] = v2;
        v16[2 * m + 1] = sub_A01(v3, v2);       // f(f(v[2*M],mark),v[2*m+1])
        ++mark;
      }
    }
</code></pre><p>v16中前后两个64位有符号数进行二次处理后交换，如此10次</p>
<p>4.</p>
<pre><code>for ( n = 0; n &lt;= 7; ++n )
    {
      for ( ii = 0; ii &lt;= 7; ++ii )
        *(_BYTE *)(8 * (ii ^ n) + ii + f_add) = ((unsigned __int64)v16[n] &gt;&gt; 7 * (unsigned __int8)ii) &amp; 0x7F;// f_add
    }
</code></pre><p>单个bit处理</p>
<p>5.</p>
<pre><code>mark += sub_7D1(mark, v15, 0x5F5E100);
</code></pre><p>最后对mark进行处理</p>
<pre class="line-numbers language-sub_A01-&gt;sub_7D1-&gt;sub_72D```的分析："><code class="language-sub_A01-&gt;sub_7D1-&gt;sub_72D```的分析：">
### sub_A01:

中有一些很坑的点，值得好好分析

    __int64 __fastcall sub_A01(__int64 temp, __int64 mark)
    {
      __int64 rdtsc_v2; // ST18_8
      __int64 v3; // ST20_8
      __int64 v4; // ST28_8
      __int64 v5; // rbx
      __int64 v6; // rax

      rdtsc_v2 = _rdtsc();
      v3 = sub_99C(temp, mark);
      v4 = sub_9EB(v3, mark);
      v5 = sub_7D1(mark, rdtsc_v2, 0x5F5E100);
      v6 = sub_944(v4);
      return sub_99C(v6, v5);
    }
可以看到这个东西跟俄罗斯套娃似的，里三层外三层。可仔细看整个函数简化为：

    v3=(0x59D39E717F7 * m2 + 0x35E55F10E61 * temp_v - 0xC40BF11DDFCD22E) & 0xFFFFFFFFFFFFFF
    v4=v3^m2
    v5=sub_7D1(mark, rdtsc_v2, 0x5F5E100);
    v6=(v4 >> 48) ^ (v4 >> 40) ^ (v4 >> 32) ^ (v4 >> 24) ^ v4 ^ (v4 >> 8) ^ (v4 >> 16) ^ (v4 >> 56)
    #        1-2        1 -3         1 -4         1-5     1-8     1-7         1 -6            1
    return (0x59D39E717F7 * v5 + 0x35E55F10E61 * v6 - 0xC40BF11DDFCD22E) & 0xFFFFFFFFFFFFFF

值得注意这里也用了```sub_7D1```，观察它
### sub_7D1

    __int64 __fastcall sub_7D1(int mark, __int64 v2, int a3)
    {
      int v3; // ST08_4
      unsigned __int64 v4; // rax

      v3 = a3;                                      // 0x5F5E100
      v4 = _rdtsc();
      return sub_72D((unsigned int)((v4 - v2) / v3) + mark);// (v4-v2)/0x5f5e100 < 0 故为0
    }
原来它也是一个俄罗斯套娃，可以看到从```sub_A01```传进来的参数``` rdtsc_v2 = _rdtsc();```终于通过层层包裹到达了使用它的地方。```((v4 - v2) / v3)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>_rdtsc() 指令返回的是自开机始CPU的周期数</p>
</blockquote>
<p>这里笔者在动态单步调试时发现这个即使mark相同的<code>sub_72D</code>传入的参数依旧时不同，纠结了很久。这个东西明显是跟最终的flag是无关的才对。后来经过学姐点拨才恍然大悟：真正程序执行的时候这一部分为0，而动态调试的时候其中的时间会增大相减大于被除数0x5F5E100,使之无法归为0.</p>
<blockquote>
<p><strong>这个地方也让我思考了以下反调试软件的编写，可以向程序中加入类似得到期间运行时间的代码来干扰调试</strong></p>
</blockquote>
<h3 id="sub-72D"><a href="#sub-72D" class="headerlink" title="sub_72D"></a>sub_72D</h3><p><code>sub_72D</code>中最终的函数是读取文件的一个函数<code>sub_650</code></p>
<pre><code>__int64 __fastcall sub_650(__int64 retaddr, __int16 mark)
{
  return *(unsigned int *)(4LL * ((mark + (_WORD)retaddr) &amp; 0x3FF) + (retaddr &amp; 0xFFFFFFFFFFFFF000LL));// 读取内存某一位置
                                                // retaddr&amp;0x3ff=8
                                            // (8+mark&amp;3ff)&lt;&lt;2+基址
}
</code></pre><p><code>retaddr &amp; 0xFFFFFFFFFFFFF000</code>获得的是整个程序在运行时的基址</p>
<h2 id="逆向"><a href="#逆向" class="headerlink" title="#逆向"></a>#逆向</h2><p>整个程序的流程已分析完毕，接下来的逆向程序编写才是考验的人的时候。</p>
<p>笔者认为其中最难的是对有符号数无符号数的的处理，以及对不同大小的整型的处理。分析只是对它有个大概的了解，从这里开始要求真正理解完全这个程序。</p>
<pre><code>import ctypes
import struct
import gmpy2


def tosigned_long(var): #有符号长整型
    return var &amp; ((1 &lt;&lt; 64) - 1)
    # return ctypes.c_long(var).value

#sub_7d1
def get_mark(var):
    offset=(8+var &amp; 0x3ff)*4
    return struct.unpack(&#39;&lt;i&#39;,content[offset:offset+4])[0] #读取指定位置

#SUB_72D
def so_3( var ):

    t1 = get_mark(var)
    t2 = get_mark(2 + var)
    t3 = get_mark(2 * var)
    t4 = get_mark(3 * var)
    t5 = get_mark((var + 13))
    return tosigned_long((t3 * t4 ^ ((t2 + t1) &lt;&lt; 32)) ^ t5)

#sub_a01的逆
def so_2(retval , markval):
    # 正向
    # 注意：数据类型皆为__int64
    # v3=(0x59D39E717F7 * m2 + 0x35E55F10E61 * temp_v - 0xC40BF11DDFCD22E) &amp; 0xFFFFFFFFFFFFFF
    # v4=v3^m2
    # v5=get_mark(m2)
    # v6=(v4 &gt;&gt; 48) ^ (v4 &gt;&gt; 40) ^ (v4 &gt;&gt; 32) ^ (v4 &gt;&gt; 24) ^ v4 ^ (v4 &gt;&gt; 8) ^ (v4 &gt;&gt; 16) ^ (v4 &gt;&gt; 56)
    # #        1-2        1 -3         1 -4         1-5     1-8     1-7         1 -6            1
    # return (0x59D39E717F7 * v5 + 0x35E55F10E61 * v6 - 0xC40BF11DDFCD22E) &amp; 0xFFFFFFFFFFFFFF

    #逆
    temp1=tosigned_long(retval+0xC40BF11DDFCD22E)

    v5=so_3(markval)
    temp2=tosigned_long(v5*0x59D39E717F7)&amp; 0xFFFFFFFFFFFFFF
    t1 = tosigned_long(tosigned_long(temp1-temp2)%(1&lt;&lt;56))&amp; 0xFFFFFFFFFFFFFF #保留56位(数字)
    t2 = gmpy2.invert(0x35E55F10E61,(1&lt;&lt;56))   #求逆元
    v6 = (tosigned_long(t1*t2) &amp; 0xFFFFFFFFFFFFFF)
    mark_high=markval&amp; 0xff00000000000000
    v6=v6| mark_high #v6=数字加上了符号位

    tmp=[]
    for i in range(7,-1,-1):
        tmp.append((v6&gt;&gt;(8*i))&amp;0xff)

    g=[0]*8
    g[0]=tmp[0]
    v4=g[0]&lt;&lt;56

    for n in range(8):
        g[n] = tmp[n]
        for j in range(n):
            g[n]^=g[j]
        v4|=g[n]&lt;&lt;((8-n-1)*8)


    v3=tosigned_long(tosigned_long(v4)^tosigned_long(markval))
    temp3=tosigned_long(v3+0xC40BF11DDFCD22E)
    temp4=tosigned_long(markval)*0x59D39E717F7
    t3=(temp3-temp4)%(1&lt;&lt;56)
    fin= tosigned_long(t3*tosigned_long(t2)) &amp; 0xffffffffffffff

    return fin





if __name__==&quot;__main__&quot;:
    # 读取整个文件
    binary = open(&quot;./barely_reversible&quot;, &quot;rb&quot;)
    content = binary.read()
    binary.close()

    # 读取最终校验值
    fp = open(&quot;./barely_reversible&quot;, &quot;rb&quot;)
    fp.seek(0x1da0)
    content2 = fp.read(64)
    start_input = list(content2)  # 读入最终结果
    print(start_input)

    fin_input = [0] * 64  # 正确的序列
    # 标记
    mark = 0x4E65534532303138
    mark_array = []

    # 标记还原
    for i in range(8):
        for i in range(8):
            mark += 1

        for i in range(10):
            for i in range(4):
                mark += 1

        mark_array.append(tosigned_long(mark))


        if i == 7: break  # 此时无后续，计算mark无意义

        mark +=so_3(mark)

    print(mark_array)
    #主循环
    # temp_list=[0]*8
    for i in range(8):

        temp_list = [0]*8
        #第一步
        for n in range(8):

            for ii in range(8):
                shift=7*ii
                temp_list[n]= temp_list[n] | (start_input[8*(ii^n)+ii]&lt;&lt;shift)
                # print(temp_list[n])
        #第二步
        marker = mark_array[-1-i]-4
        for l in range(10):

            for m in range(4):

                temp = so_2(temp_list[2*m+1],temp_list[2*m])
                former = so_2(temp,marker)
                temp_list[2 * m + 1] = temp_list[2*m]
                temp_list[2*m] = former
                # print(temp_list[2 * m + 1])
                # print(temp_list[2 * m])
                marker += 1
            marker -= 8   #-4-4,回到上上的mark
        #     for i in temp_list:
        #         print(hex(i),end=&quot; &quot;)
        #     print(&quot;\n&quot;)
        #
        for i in temp_list:
            print(hex(i))
        #第三步
        marker-=4
        for k in range(8):
            temp_list[k]=so_2(temp_list[k],marker)
            marker+=1

        #第三步

        for j in range(8):
            start_input[j * 8]=(temp_list[j] &amp; (0x7f &lt;&lt; 28) ) &gt;&gt; 28     #取7位
            start_input[j * 8+1] = (temp_list[j] &amp; (0x7f &lt;&lt; 35)) &gt;&gt; 35
            start_input[j * 8+2] = (temp_list[j] &amp; (0x7f &lt;&lt; 42)) &gt;&gt; 42
            start_input[j * 8+3] = (temp_list[j] &amp; (0x7f &lt;&lt; 49)) &gt;&gt; 49
            start_input[j * 8+4] = (temp_list[j] &amp; 0x7f)
            start_input[j * 8+5] = (temp_list[j] &amp; (0x7f &lt;&lt; 7)) &gt;&gt; 7
            start_input[j * 8+6] = (temp_list[j] &amp; (0x7f &lt;&lt; 14)) &gt;&gt; 14
            start_input[j * 8+7] = (temp_list[j] &amp; (0x7f &lt;&lt; 21)) &gt;&gt; 21

    #输出结果
    for i in start_input:
        print(chr(i),end=&#39;&#39;)
</code></pre><p>还没写完，先过个周末再说：）</p>

  </div>
  <!--评论块-->
    

</article>
<nav class="post-nav">
  <!-- Prev Nav -->
    


  <!-- Next Nav -->
    
  <a href="/2019/08/01/隐藏debug探秘/" id="post_nav-older" class="post-nav-content next-content">
      旧篇
  </a>
    
</nav>
<div class="post-toc-btn"><i class="material-icons">format_list_numbered</i></div>
<div class="post-toc-none"><p>(无)</p></div>
<div class="post-toc-box">
    <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#分析文件"><span class="post-toc-number">1.</span> <span class="post-toc-text">#分析文件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#深入校验函数"><span class="post-toc-number">2.</span> <span class="post-toc-text">#深入校验函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#sub-72D"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">sub_72D</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#逆向"><span class="post-toc-number">3.</span> <span class="post-toc-text">#逆向</span></a></li></ol>
</div>
<!--<div class="post-back"><i class="material-icons">arrow_back</i></div>-->
<script type="text/javascript">
    menu();
</script>
  </div>
</div>
<div id="bottom-outer">
  <div id="bottom-inner">
    <a  id="top-button" onfocus="this.blur();"><div class="up upinbody" style="background-color:#272727"><i class="material-icons material-up">vertical_align_top</i></div></a>


<p >Copyright ©  2018  太空独角兽</p>
<p style="font-size: 10px" id="footer-times" data-time="4/4/2018"></p>
<script>
    var beginTime=document.getElementById("footer-times").dataset.time
    function show_date_time(){
        var span=document.getElementById("footer-times")
        window.setTimeout("show_date_time()", 1000);
        BirthDay=new Date(beginTime);//初始日期
        today=new Date();
        timeold=(today.getTime()-BirthDay.getTime());
        sectimeold=timeold/1000
        secondsold=Math.floor(sectimeold);
        msPerDay=24*60*60*1000
        e_daysold=timeold/msPerDay
        daysold=Math.floor(e_daysold);
        e_hrsold=(e_daysold-daysold)*24;
        hrsold=Math.floor(e_hrsold);
        e_minsold=(e_hrsold-hrsold)*60;
        minsold=Math.floor((e_hrsold-hrsold)*60);
        seconds=Math.floor((e_minsold-minsold)*60);
        span.innerHTML="本站已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒";
    }
    show_date_time();
</script>

  </div>
</div>

<!--影集界面需要的资源-->



<!-- scripts list from theme config.yml -->

<script src="/js/jquery-3.1.1.min.js"></script>

<script src="/js/materialize.min.js"></script>

<script src="/js/main.min.js"></script>


<script>
    NProgress.start();
    NProgress.done();
    lazy();
    links();
    window.onpopstate = menu();
    //pjax操作
    $(document).pjax('a:not(.nopjax)', '#content-inner', {fragment:'#content-inner', timeout:8000});
    $(document).on('pjax:start', NProgress.start).on('pjax:end', NProgress.done)
        .on('pjax:end', () => {
            dowmdiv();
            lazy();
            toc();
            links();
            menu();
        });
</script>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</body>
</html>
